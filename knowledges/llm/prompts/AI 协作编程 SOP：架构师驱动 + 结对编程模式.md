# **AI 协作编程 SOP：架构师驱动 + 结对编程模式**

*这是一份 **完整 SOP（标准操作流程）文档**，包含分阶段说明和配套提示词，便于反复使用与团队推广。*

## 1. 总体理念

* **目标**：由人类主导架构与关键设计，AI 负责辅助生成，提升效率、保持可控。
* **原则**：

  1. 分阶段推进，避免一次性生成大量实现代码。
  2. 保持需求、设计、实现的逐层递进，利于审查与重构。
  3. 人类保持最终决策权，AI 作为结对搭档（Pair Programmer）。

---

## 2. 分阶段流程

### **步骤 1：需求讨论（多轮对话）**

* **目标**：明确业务背景、需求边界、潜在约束条件。
* **方法**：与 AI 进行多轮问答，确保需求明确。
* **输出**：清晰的需求描述、业务目标、已知约束。

**配套提示词：**

```
你是我的技术合作者（架构师+全栈）。我们进行需求澄清，请：
1. 帮我识别功能模块、边界和潜在风险；
2. 列出不明确的地方并发问；
3. 提出2-3种实现思路，比较优缺点。
背景：{业务背景}
目标：{想要达成的效果}
已知限制：{时间/预算/技术约束}
```

---

### **步骤 2：技术方案文档（只生成数据结构和签名，不写实现）**

* **目标**：沉淀设计为文档，锁定接口和数据结构。
* **方法**：要求 AI 输出整体架构、数据库设计、方法/函数签名，不写逻辑实现。
* **输出**：文档包含架构图、数据结构、方法签名。

**配套提示词：**

```
请根据我们讨论的需求，生成技术方案文档：
- 系统架构图（Mermaid 格式）
- 核心数据模型（表格：字段|类型|说明|索引）
- 方法/函数签名（参数、返回值、简短注释），不要写实现逻辑
- 标注模块职责和接口边界
```

---

### **步骤 3：生成签名和注释**

* **目标**：补充详细注释和接口约束，为实现打基础。
* **方法**：让 AI 对签名逐条补充注释、异常说明、调用关系。
* **输出**：接口签名+注释（docstring 格式）。

**配套提示词：**

```
请根据以下方法/函数签名补充注释，要求：
- 描述功能
- 列出参数、类型、作用
- 列出返回值、类型、说明
- 列出可能的异常
签名列表：
{贴出签名列表}
```

---

### **步骤 4：人工审查**

* **目标**：人工检查数据结构和接口设计的合理性。
* **方法**：架构师或团队成员审查命名、一致性、边界条件。

（此阶段无需 AI 参与，除非需要让 AI 提出改进建议）

---

### **步骤 5：逐函数实现**

* **目标**：逐个实现逻辑，每次生成一个函数，确保控制粒度。
* **方法**：单独针对函数提示 AI，指定依赖、性能要求、测试要求。
* **输出**：函数实现、必要的单元测试。

**配套提示词：**

```
请实现以下函数逻辑：
{函数签名+注释}

要求：
- 结合上下文 {相关模块/依赖说明}
- 符合 {性能/安全/错误处理要求}
- 生成可运行代码并附最小可行测试用例
```

---

## 3. 方法论优势总结

* **渐进式生成**：避免大段实现不可控。
* **文档驱动**：设计与实现解耦，易于审查与维护。
* **AI 结对模式**：人类主导设计、AI 辅助生成，提高质量和速度。
* **高可控性**：每个阶段可人工干预、调整。

---

## 4. 进阶优化建议

* 固化输出格式（Mermaid 图、数据表、docstring 模板），利于自动化管理。
* 审查环节可加入 AI 辅助代码审查提示词。
* 逐步引入自动化测试清单，由 AI 自动生成断言和边界测试。

---

这份 SOP 文档可以作为团队内部 **AI 编程协作标准** 使用。每个阶段都有对应提示词，直接复用即可。

---
